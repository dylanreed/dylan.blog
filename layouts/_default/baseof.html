<!doctype html>
<html lang="en">
<head>
    {{- partial "head.html" . -}}
</head>
<body>
    <script>
        // Apply saved theme immediately to prevent flash
        if (localStorage.getItem('theme') === 'night') {
            document.body.classList.add('night');
        }
    </script>
    <button class="mode-toggle" onclick="toggleTheme()" title="Toggle day/night mode">
        <img class="mode-icon" src="/sprites/moon.png" alt="Toggle theme">
    </button>
    <script>
        function toggleTheme() {
            const isNight = document.body.classList.toggle('night');
            localStorage.setItem('theme', isNight ? 'night' : 'day');
            updateButton();
        }
        function updateButton() {
            const btn = document.querySelector('.mode-toggle .mode-icon');
            const isNight = document.body.classList.contains('night');
            btn.src = isNight ? '/sprites/sun.png' : '/sprites/moon.png';
        }
        updateButton();
    </script>

    {{- partial "header.html" . -}}

    <main class="main-content">
        {{- block "main" . }}{{- end }}
    </main>

    {{- partial "footer.html" . -}}

    {{ partial "custom_footer.html" . }}
    {{ partial "plugin_js.html" . }}
</body>
</html>
