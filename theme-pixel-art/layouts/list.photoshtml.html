{{ define "main" }}
<div class="page-container">
    <h1 class="page-title">Photos</h1>

    <div class="photo-grid">
        {{ $pages := where .Site.RegularPages "Type" "post" }}
        {{ range $pages }}
            {{ $permalink := .Permalink }}
            {{/* Extract images from post content */}}
            {{ $content := .Content }}
            {{ range findRE `<img[^>]+src="([^"]+)"` $content }}
                {{ $src := replaceRE `.*src="([^"]+)".*` "$1" . }}
                <a href="{{ $permalink }}" class="photo-item">
                    <img src="{{ $src }}" alt="" loading="lazy">
                </a>
            {{ end }}
            {{/* Also check params.photos if available */}}
            {{ range .Params.photos }}
            <a href="{{ $permalink }}" class="photo-item">
                <img src="{{ . }}" alt="" loading="lazy">
            </a>
            {{ end }}
        {{ end }}
    </div>
</div>
{{ end }}
